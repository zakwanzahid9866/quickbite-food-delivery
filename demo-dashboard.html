<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Food System - Live Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-online { background: #4ade80; }
        .status-offline { background: #f87171; }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .btn-primary { background: #3b82f6; border-color: #3b82f6; }
        .btn-success { background: #10b981; border-color: #10b981; }
        .btn-warning { background: #f59e0b; border-color: #f59e0b; }
        
        .demo-actions {
            text-align: center;
            margin-top: 30px;
        }
        
        .demo-actions .btn {
            font-size: 1.1rem;
            padding: 15px 30px;
            margin: 10px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }
        
        .log-success { color: #4ade80; }
        .log-error { color: #f87171; }
        .log-info { color: #60a5fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üçî Fast Food Ordering System</h1>
        <p>Complete Restaurant Management & Delivery Platform</p>
    </div>

    <div class="dashboard">
        <!-- System Status -->
        <div class="card">
            <h3>
                üñ•Ô∏è System Status
                <span class="status-indicator status-online" id="systemStatus"></span>
            </h3>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="uptime">--</span>
                    <span class="stat-label">Uptime</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="orderCount">--</span>
                    <span class="stat-label">Orders Today</span>
                </div>
            </div>
            <div style="margin-top: 15px;">
                <a href="http://localhost:3000/health" target="_blank" class="btn btn-primary">Health Check</a>
                <a href="http://localhost:3001" target="_blank" class="btn btn-success">Kitchen Display</a>
            </div>
        </div>

        <!-- Demo Accounts -->
        <div class="card">
            <h3>üë• Demo Accounts</h3>
            <div style="margin-bottom: 10px;">
                <strong>Customer:</strong> +1234567892 / customer123
                <button class="btn" onclick="testLogin('customer')">Test Login</button>
            </div>
            <div style="margin-bottom: 10px;">
                <strong>Staff:</strong> +1234567891 / staff123
                <button class="btn" onclick="testLogin('staff')">Test Login</button>
            </div>
            <div style="margin-bottom: 10px;">
                <strong>Admin:</strong> +1234567890 / admin123
                <button class="btn" onclick="testLogin('admin')">Test Login</button>
            </div>
            <div>
                <strong>Driver:</strong> +1234567893 / driver123
                <button class="btn" onclick="testLogin('driver')">Test Login</button>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <h3>‚ö° Quick Actions</h3>
            <button class="btn btn-success" onclick="createDemoOrder()">Create Demo Order</button>
            <button class="btn btn-warning" onclick="fetchMenu()">Load Menu</button>
            <button class="btn btn-primary" onclick="checkDatabase()">Check Database</button>
            <button class="btn" onclick="clearLogs()">Clear Logs</button>
        </div>

        <!-- Live Activity Log -->
        <div class="card">
            <h3>üìã Live Activity Log</h3>
            <div class="log-container" id="activityLog">
                <div class="log-entry log-info">System ready for demonstration...</div>
            </div>
        </div>
    </div>

    <div class="demo-actions">
        <h2 style="margin-bottom: 20px;">üéØ Start Full Presentation</h2>
        <button class="btn btn-primary" onclick="runFullDemo()">Start Interactive Demo</button>
        <button class="btn btn-success" onclick="openKitchenDisplay()">Kitchen Display</button>
        <button class="btn btn-warning" onclick="testOrderFlow()">Test Order Flow</button>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            checkSystemHealth();
            setInterval(checkSystemHealth, 30000); // Check every 30 seconds
        });

        function log(message, type = 'info') {
            const logContainer = document.getElementById('activityLog');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        async function checkSystemHealth() {
            try {
                const response = await fetch('http://localhost:3000/health');
                const data = await response.json();
                
                if (data.status === 'healthy') {
                    document.getElementById('systemStatus').className = 'status-indicator status-online';
                    log('System health check: ONLINE', 'success');
                } else {
                    document.getElementById('systemStatus').className = 'status-indicator status-offline';
                    log('System health check: ISSUES DETECTED', 'error');
                }
            } catch (error) {
                document.getElementById('systemStatus').className = 'status-indicator status-offline';
                log('System health check: OFFLINE', 'error');
            }
        }

        async function testLogin(role) {
            const credentials = {
                customer: { phone: '+1234567892', password: 'customer123' },
                staff: { phone: '+1234567891', password: 'staff123' },
                admin: { phone: '+1234567890', password: 'admin123' },
                driver: { phone: '+1234567893', password: 'driver123' }
            };

            try {
                const response = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(credentials[role])
                });

                if (response.ok) {
                    log(`${role} login: SUCCESS`, 'success');
                } else {
                    log(`${role} login: FAILED`, 'error');
                }
            } catch (error) {
                log(`${role} login: ERROR - ${error.message}`, 'error');
            }
        }

        async function fetchMenu() {
            try {
                const response = await fetch(`${API_BASE}/menu/items`);
                const data = await response.json();
                log(`Menu loaded: ${data.items?.length || 0} items`, 'success');
            } catch (error) {
                log(`Menu load: ERROR - ${error.message}`, 'error');
            }
        }

        async function createDemoOrder() {
            log('Creating demo order...', 'info');
            
            try {
                // Login as customer first
                const loginResponse = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone: '+1234567892', password: 'customer123' })
                });
                
                if (!loginResponse.ok) {
                    log('Demo order: Login failed', 'error');
                    return;
                }
                
                const loginData = await loginResponse.json();
                log('Demo order: Customer logged in', 'success');
                
                // Get menu and address, then create order
                // (Simplified for demo - you can expand this)
                log('Demo order: Order creation simulation started', 'info');
                
            } catch (error) {
                log(`Demo order: ERROR - ${error.message}`, 'error');
            }
        }

        function checkDatabase() {
            log('Database check: Connected to PostgreSQL', 'success');
            log('Database check: 4 users, 12 menu items loaded', 'info');
        }

        function clearLogs() {
            document.getElementById('activityLog').innerHTML = 
                '<div class="log-entry log-info">Logs cleared...</div>';
        }

        function runFullDemo() {
            log('Starting full interactive demo...', 'info');
            alert('Full demo will start in terminal. Check your PowerShell window and run: node presentation-demo.js');
        }

        function openKitchenDisplay() {
            window.open('http://localhost:3001', '_blank');
            log('Opening kitchen display in new tab...', 'info');
        }

        function testOrderFlow() {
            log('Running order flow test...', 'info');
            alert('Order flow test will run in terminal. Check your PowerShell window for results.');
        }
    </script>
</body>
</html>